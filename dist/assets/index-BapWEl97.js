var ke=t=>{throw TypeError(t)};var Le=(t,e,s)=>e.has(t)||ke("Cannot "+s);var f=(t,e,s)=>(Le(t,e,"read from private field"),s?s.call(t):e.get(t)),m=(t,e,s)=>e.has(t)?ke("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,s),l=(t,e,s,n)=>(Le(t,e,"write to private field"),n?n.call(t,s):e.set(t,s),s),oe=(t,e,s)=>(Le(t,e,"access private method"),s);import{ah as U,ai as c,aj as I,ak as P,al as Xe,am as Qe,an as a,ao as Ye,ap as Ce,aq as ue,ar as ge,as as Ge,at as Ke,au as v,av as ie,aw as et,ax as L,ay as fe,az as de}from"./index-CvLk1Ktl.js";import{aC as Ct,aB as _t,aH as Ut,aE as zt,aG as Nt,aF as Vt,aJ as Dt,aD as Ot,aI as Rt,aK as Tt,aL as Kt,aA as $t}from"./index-CvLk1Ktl.js";function tt(t){let e=t.toString(16);for(;e.length<2;)e="0"+e;return"0x"+e}function _e(t,e,s){let n=0;for(let r=0;r<s;r++)n=n*256+t[e+r];return n}function Ue(t,e,s,n){const r=[];for(;s<e+1+n;){const i=$e(t,s);r.push(i.result),s+=i.consumed,I(s<=e+1+n,"child data too short","BUFFER_OVERRUN",{buffer:t,length:n,offset:e})}return{consumed:1+n,result:r}}function $e(t,e){I(t.length!==0,"data too short","BUFFER_OVERRUN",{buffer:t,length:0,offset:1});const s=n=>{I(n<=t.length,"data short segment too short","BUFFER_OVERRUN",{buffer:t,length:t.length,offset:n})};if(t[e]>=248){const n=t[e]-247;s(e+1+n);const r=_e(t,e+1,n);return s(e+1+n+r),Ue(t,e,e+1+n,n+r)}else if(t[e]>=192){const n=t[e]-192;return s(e+1+n),Ue(t,e,e+1,n)}else if(t[e]>=184){const n=t[e]-183;s(e+1+n);const r=_e(t,e+1,n);s(e+1+n+r);const i=P(t.slice(e+1+n,e+1+n+r));return{consumed:1+n+r,result:i}}else if(t[e]>=128){const n=t[e]-128;s(e+1+n);const r=P(t.slice(e+1,e+1+n));return{consumed:1+n,result:r}}return{consumed:1,result:tt(t[e])}}function be(t){const e=U(t,"data"),s=$e(e,0);return c(s.consumed===e.length,"unexpected junk after rlp payload","data",t),s.result}function ze(t){const e=[];for(;t;)e.unshift(t&255),t>>=8;return e}function je(t){if(Array.isArray(t)){let n=[];if(t.forEach(function(i){n=n.concat(je(i))}),n.length<=55)return n.unshift(192+n.length),n;const r=ze(n.length);return r.unshift(247+r.length),r.concat(n)}const e=Array.prototype.slice.call(U(t,"object"));if(e.length===1&&e[0]<=127)return e;if(e.length<=55)return e.unshift(128+e.length),e;const s=ze(e.length);return s.unshift(183+s.length),s.concat(e)}const Ne="0123456789abcdef";function te(t){let e="0x";for(const s of je(t))e+=Ne[s>>4],e+=Ne[s&15];return e}const[st,nt]=a.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(t=>BigInt(t))),V=new Uint32Array(80),D=new Uint32Array(80);class rt extends Qe{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:e,Al:s,Bh:n,Bl:r,Ch:i,Cl:o,Dh:g,Dl:b,Eh:A,El:w,Fh:p,Fl:x,Gh:F,Gl:B,Hh:G,Hl:H}=this;return[e,s,n,r,i,o,g,b,A,w,p,x,F,B,G,H]}set(e,s,n,r,i,o,g,b,A,w,p,x,F,B,G,H){this.Ah=e|0,this.Al=s|0,this.Bh=n|0,this.Bl=r|0,this.Ch=i|0,this.Cl=o|0,this.Dh=g|0,this.Dl=b|0,this.Eh=A|0,this.El=w|0,this.Fh=p|0,this.Fl=x|0,this.Gh=F|0,this.Gl=B|0,this.Hh=G|0,this.Hl=H|0}process(e,s){for(let u=0;u<16;u++,s+=4)V[u]=e.getUint32(s),D[u]=e.getUint32(s+=4);for(let u=16;u<80;u++){const z=V[u-15]|0,N=D[u-15]|0,pe=a.rotrSH(z,N,1)^a.rotrSH(z,N,8)^a.shrSH(z,N,7),xe=a.rotrSL(z,N,1)^a.rotrSL(z,N,8)^a.shrSL(z,N,7),E=V[u-2]|0,k=D[u-2]|0,le=a.rotrSH(E,k,19)^a.rotrBH(E,k,61)^a.shrSH(E,k,6),Pe=a.rotrSL(E,k,19)^a.rotrBL(E,k,61)^a.shrSL(E,k,6),ce=a.add4L(xe,Pe,D[u-7],D[u-16]),Ae=a.add4H(ce,pe,le,V[u-7],V[u-16]);V[u]=Ae|0,D[u]=ce|0}let{Ah:n,Al:r,Bh:i,Bl:o,Ch:g,Cl:b,Dh:A,Dl:w,Eh:p,El:x,Fh:F,Fl:B,Gh:G,Gl:H,Hh:ne,Hl:re}=this;for(let u=0;u<80;u++){const z=a.rotrSH(p,x,14)^a.rotrSH(p,x,18)^a.rotrBH(p,x,41),N=a.rotrSL(p,x,14)^a.rotrSL(p,x,18)^a.rotrBL(p,x,41),pe=p&F^~p&G,xe=x&B^~x&H,E=a.add5L(re,N,xe,nt[u],D[u]),k=a.add5H(E,ne,z,pe,st[u],V[u]),le=E|0,Pe=a.rotrSH(n,r,28)^a.rotrBH(n,r,34)^a.rotrBH(n,r,39),ce=a.rotrSL(n,r,28)^a.rotrBL(n,r,34)^a.rotrBL(n,r,39),Ae=n&i^n&g^i&g,qe=r&o^r&b^o&b;ne=G|0,re=H|0,G=F|0,H=B|0,F=p|0,B=x|0,{h:p,l:x}=a.add(A|0,w|0,k|0,le|0),A=g|0,w=b|0,g=i|0,b=o|0,i=n|0,o=r|0;const Ee=a.add3L(le,ce,qe);n=a.add3H(Ee,k,Pe,Ae),r=Ee|0}({h:n,l:r}=a.add(this.Ah|0,this.Al|0,n|0,r|0)),{h:i,l:o}=a.add(this.Bh|0,this.Bl|0,i|0,o|0),{h:g,l:b}=a.add(this.Ch|0,this.Cl|0,g|0,b|0),{h:A,l:w}=a.add(this.Dh|0,this.Dl|0,A|0,w|0),{h:p,l:x}=a.add(this.Eh|0,this.El|0,p|0,x|0),{h:F,l:B}=a.add(this.Fh|0,this.Fl|0,F|0,B|0),{h:G,l:H}=a.add(this.Gh|0,this.Gl|0,G|0,H|0),{h:ne,l:re}=a.add(this.Hh|0,this.Hl|0,ne|0,re|0),this.set(n,r,i,o,g,b,A,w,p,x,F,B,G,H,ne,re)}roundClean(){V.fill(0),D.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}const it=Xe(()=>new rt);function at(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof Ce<"u")return Ce;throw new Error("unable to locate global object")}const Ve=at();Ve.crypto||Ve.msCrypto;function lt(t){switch(t){case"sha256":return Ye.create();case"sha512":return it.create()}c(!1,"invalid hashing algorithm name","algorithm",t)}const Me=function(t){return lt("sha256").update(t).digest()};let We=Me,Je=!1;function se(t){const e=U(t,"data");return P(We(e))}se._=Me;se.lock=function(){Je=!0};se.register=function(t){if(Je)throw new Error("sha256 is locked");We=t};Object.freeze(se);Object.freeze(se);const Ze="0x0000000000000000000000000000000000000000",ct=BigInt(0),ot=BigInt(36);function De(t){t=t.toLowerCase();const e=t.substring(2).split(""),s=new Uint8Array(40);for(let r=0;r<40;r++)s[r]=e[r].charCodeAt(0);const n=U(ue(s));for(let r=0;r<40;r+=2)n[r>>1]>>4>=8&&(e[r]=e[r].toUpperCase()),(n[r>>1]&15)>=8&&(e[r+1]=e[r+1].toUpperCase());return"0x"+e.join("")}const He={};for(let t=0;t<10;t++)He[String(t)]=String(t);for(let t=0;t<26;t++)He[String.fromCharCode(65+t)]=String(10+t);const Oe=15;function ht(t){t=t.toUpperCase(),t=t.substring(4)+t.substring(0,2)+"00";let e=t.split("").map(n=>He[n]).join("");for(;e.length>=Oe;){let n=e.substring(0,Oe);e=parseInt(n,10)%97+e.substring(n.length)}let s=String(98-parseInt(e,10)%97);for(;s.length<2;)s="0"+s;return s}const ut=function(){const t={};for(let e=0;e<36;e++){const s="0123456789abcdefghijklmnopqrstuvwxyz"[e];t[s]=BigInt(e)}return t}();function ft(t){t=t.toLowerCase();let e=ct;for(let s=0;s<t.length;s++)e=e*ot+ut[t[s]];return e}function me(t){if(c(typeof t=="string","invalid address","address",t),t.match(/^(0x)?[0-9a-fA-F]{40}$/)){t.startsWith("0x")||(t="0x"+t);const e=De(t);return c(!t.match(/([A-F].*[a-f])|([a-f].*[A-F])/)||e===t,"bad address checksum","address",t),e}if(t.match(/^XE[0-9]{2}[0-9A-Za-z]{30,31}$/)){c(t.substring(2,4)===ht(t),"bad icap checksum","address",t);let e=ft(t.substring(4)).toString(16);for(;e.length<40;)e="0"+e;return De("0x"+e)}c(!1,"invalid address","address",t)}function Fe(t,e){return{address:me(t),storageKeys:e.map((s,n)=>(c(ge(s,32),"invalid slot",`storageKeys[${n}]`,s),s.toLowerCase()))}}function Ie(t){if(Array.isArray(t))return t.map((s,n)=>Array.isArray(s)?(c(s.length===2,"invalid slot set",`value[${n}]`,s),Fe(s[0],s[1])):(c(s!=null&&typeof s=="object","invalid address-slot set","value",t),Fe(s.address,s.storageKeys)));c(t!=null&&typeof t=="object","invalid access list","value",t);const e=Object.keys(t).map(s=>{const n=t[s].reduce((r,i)=>(r[i]=!0,r),{});return Fe(s,Object.keys(n).sort())});return e.sort((s,n)=>s.address.localeCompare(n.address)),e}function dt(t){let e;return typeof t=="string"?e=Ge.computePublicKey(t,!1):e=t.publicKey,me(ue("0x"+e.substring(4)).substring(26))}function gt(t,e){return dt(Ge.recoverPublicKey(t,e))}const y=BigInt(0),bt=BigInt(2),mt=BigInt(27),yt=BigInt(28),pt=BigInt(35),xt=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),Be=4096*32;function Re(t,e){let s=t.toString(16);for(;s.length<2;)s="0"+s;return s+=se(e).substring(4),"0x"+s}function ye(t){return t==="0x"?null:me(t)}function ve(t,e){try{return Ie(t)}catch(s){c(!1,s.message,e,t)}}function ae(t,e){return t==="0x"?0:Ke(t,e)}function d(t,e){if(t==="0x")return y;const s=v(t,e);return c(s<=xt,"value exceeds uint size",e,s),s}function h(t,e){const s=v(t,"value"),n=L(s);return c(n.length<=32,"value too large",`tx.${e}`,s),n}function Se(t){return Ie(t).map(e=>[e.address,e.storageKeys])}function Pt(t,e){c(Array.isArray(t),`invalid ${e}`,"value",t);for(let s=0;s<t.length;s++)c(ge(t[s],32),"invalid ${ param } hash",`value[${s}]`,t[s]);return t}function At(t){const e=be(t);c(Array.isArray(e)&&(e.length===9||e.length===6),"invalid field count for legacy transaction","data",t);const s={type:0,nonce:ae(e[0],"nonce"),gasPrice:d(e[1],"gasPrice"),gasLimit:d(e[2],"gasLimit"),to:ye(e[3]),value:d(e[4],"value"),data:P(e[5]),chainId:y};if(e.length===6)return s;const n=d(e[6],"v"),r=d(e[7],"r"),i=d(e[8],"s");if(r===y&&i===y)s.chainId=n;else{let o=(n-pt)/bt;o<y&&(o=y),s.chainId=o,c(o!==y||n===mt||n===yt,"non-canonical legacy v","v",e[6]),s.signature=ie.from({r:de(e[7],32),s:de(e[8],32),v:n})}return s}function Lt(t,e){const s=[h(t.nonce,"nonce"),h(t.gasPrice||0,"gasPrice"),h(t.gasLimit,"gasLimit"),t.to||"0x",h(t.value,"value"),t.data];let n=y;if(t.chainId!=y)n=v(t.chainId,"tx.chainId"),c(!e||e.networkV==null||e.legacyChainId===n,"tx.chainId/sig.v mismatch","sig",e);else if(t.signature){const i=t.signature.legacyChainId;i!=null&&(n=i)}if(!e)return n!==y&&(s.push(L(n)),s.push("0x"),s.push("0x")),te(s);let r=BigInt(27+e.yParity);return n!==y?r=ie.getChainIdV(n,e.v):BigInt(e.v)!==r&&c(!1,"tx.chainId/sig.v mismatch","sig",e),s.push(L(r)),s.push(L(e.r)),s.push(L(e.s)),te(s)}function we(t,e){let s;try{if(s=ae(e[0],"yParity"),s!==0&&s!==1)throw new Error("bad yParity")}catch{c(!1,"invalid yParity","yParity",e[0])}const n=de(e[1],32),r=de(e[2],32),i=ie.from({r:n,s:r,yParity:s});t.signature=i}function Ft(t){const e=be(U(t).slice(1));c(Array.isArray(e)&&(e.length===9||e.length===12),"invalid field count for transaction type: 2","data",P(t));const s={type:2,chainId:d(e[0],"chainId"),nonce:ae(e[1],"nonce"),maxPriorityFeePerGas:d(e[2],"maxPriorityFeePerGas"),maxFeePerGas:d(e[3],"maxFeePerGas"),gasPrice:null,gasLimit:d(e[4],"gasLimit"),to:ye(e[5]),value:d(e[6],"value"),data:P(e[7]),accessList:ve(e[8],"accessList")};return e.length===9||we(s,e.slice(9)),s}function Bt(t,e){const s=[h(t.chainId,"chainId"),h(t.nonce,"nonce"),h(t.maxPriorityFeePerGas||0,"maxPriorityFeePerGas"),h(t.maxFeePerGas||0,"maxFeePerGas"),h(t.gasLimit,"gasLimit"),t.to||"0x",h(t.value,"value"),t.data,Se(t.accessList||[])];return e&&(s.push(h(e.yParity,"yParity")),s.push(L(e.r)),s.push(L(e.s))),fe(["0x02",te(s)])}function Gt(t){const e=be(U(t).slice(1));c(Array.isArray(e)&&(e.length===8||e.length===11),"invalid field count for transaction type: 1","data",P(t));const s={type:1,chainId:d(e[0],"chainId"),nonce:ae(e[1],"nonce"),gasPrice:d(e[2],"gasPrice"),gasLimit:d(e[3],"gasLimit"),to:ye(e[4]),value:d(e[5],"value"),data:P(e[6]),accessList:ve(e[7],"accessList")};return e.length===8||we(s,e.slice(8)),s}function Ht(t,e){const s=[h(t.chainId,"chainId"),h(t.nonce,"nonce"),h(t.gasPrice||0,"gasPrice"),h(t.gasLimit,"gasLimit"),t.to||"0x",h(t.value,"value"),t.data,Se(t.accessList||[])];return e&&(s.push(h(e.yParity,"recoveryParam")),s.push(L(e.r)),s.push(L(e.s))),fe(["0x01",te(s)])}function It(t){let e=be(U(t).slice(1)),s="3",n=null;if(e.length===4&&Array.isArray(e[0])){s="3 (network format)";const i=e[1],o=e[2],g=e[3];c(Array.isArray(i),"invalid network format: blobs not an array","fields[1]",i),c(Array.isArray(o),"invalid network format: commitments not an array","fields[2]",o),c(Array.isArray(g),"invalid network format: proofs not an array","fields[3]",g),c(i.length===o.length,"invalid network format: blobs/commitments length mismatch","fields",e),c(i.length===g.length,"invalid network format: blobs/proofs length mismatch","fields",e),n=[];for(let b=0;b<e[1].length;b++)n.push({data:i[b],commitment:o[b],proof:g[b]});e=e[0]}c(Array.isArray(e)&&(e.length===11||e.length===14),`invalid field count for transaction type: ${s}`,"data",P(t));const r={type:3,chainId:d(e[0],"chainId"),nonce:ae(e[1],"nonce"),maxPriorityFeePerGas:d(e[2],"maxPriorityFeePerGas"),maxFeePerGas:d(e[3],"maxFeePerGas"),gasPrice:null,gasLimit:d(e[4],"gasLimit"),to:ye(e[5]),value:d(e[6],"value"),data:P(e[7]),accessList:ve(e[8],"accessList"),maxFeePerBlobGas:d(e[9],"maxFeePerBlobGas"),blobVersionedHashes:e[10]};n&&(r.blobs=n),c(r.to!=null,`invalid address for transaction type: ${s}`,"data",t),c(Array.isArray(r.blobVersionedHashes),"invalid blobVersionedHashes: must be an array","data",t);for(let i=0;i<r.blobVersionedHashes.length;i++)c(ge(r.blobVersionedHashes[i],32),`invalid blobVersionedHash at index ${i}: must be length 32`,"data",t);return e.length===11||we(r,e.slice(11)),r}function vt(t,e,s){const n=[h(t.chainId,"chainId"),h(t.nonce,"nonce"),h(t.maxPriorityFeePerGas||0,"maxPriorityFeePerGas"),h(t.maxFeePerGas||0,"maxFeePerGas"),h(t.gasLimit,"gasLimit"),t.to||Ze,h(t.value,"value"),t.data,Se(t.accessList||[]),h(t.maxFeePerBlobGas||0,"maxFeePerBlobGas"),Pt(t.blobVersionedHashes||[],"blobVersionedHashes")];return e&&(n.push(h(e.yParity,"yParity")),n.push(L(e.r)),n.push(L(e.s)),s)?fe(["0x03",te([n,s.map(r=>r.data),s.map(r=>r.commitment),s.map(r=>r.proof)])]):fe(["0x03",te(n)])}var S,K,$,j,M,W,J,Z,q,X,Q,Y,T,O,_,R,ee,he;const C=class C{constructor(){m(this,ee);m(this,S);m(this,K);m(this,$);m(this,j);m(this,M);m(this,W);m(this,J);m(this,Z);m(this,q);m(this,X);m(this,Q);m(this,Y);m(this,T);m(this,O);m(this,_);m(this,R);l(this,S,null),l(this,K,null),l(this,j,0),l(this,M,y),l(this,W,null),l(this,J,null),l(this,Z,null),l(this,$,"0x"),l(this,q,y),l(this,X,y),l(this,Q,null),l(this,Y,null),l(this,T,null),l(this,O,null),l(this,R,null),l(this,_,null)}get type(){return f(this,S)}set type(e){switch(e){case null:l(this,S,null);break;case 0:case"legacy":l(this,S,0);break;case 1:case"berlin":case"eip-2930":l(this,S,1);break;case 2:case"london":case"eip-1559":l(this,S,2);break;case 3:case"cancun":case"eip-4844":l(this,S,3);break;default:c(!1,"unsupported transaction type","type",e)}}get typeName(){switch(this.type){case 0:return"legacy";case 1:return"eip-2930";case 2:return"eip-1559";case 3:return"eip-4844"}return null}get to(){const e=f(this,K);return e==null&&this.type===3?Ze:e}set to(e){l(this,K,e==null?null:me(e))}get nonce(){return f(this,j)}set nonce(e){l(this,j,Ke(e,"value"))}get gasLimit(){return f(this,M)}set gasLimit(e){l(this,M,v(e))}get gasPrice(){const e=f(this,W);return e==null&&(this.type===0||this.type===1)?y:e}set gasPrice(e){l(this,W,e==null?null:v(e,"gasPrice"))}get maxPriorityFeePerGas(){const e=f(this,J);return e??(this.type===2||this.type===3?y:null)}set maxPriorityFeePerGas(e){l(this,J,e==null?null:v(e,"maxPriorityFeePerGas"))}get maxFeePerGas(){const e=f(this,Z);return e??(this.type===2||this.type===3?y:null)}set maxFeePerGas(e){l(this,Z,e==null?null:v(e,"maxFeePerGas"))}get data(){return f(this,$)}set data(e){l(this,$,P(e))}get value(){return f(this,q)}set value(e){l(this,q,v(e,"value"))}get chainId(){return f(this,X)}set chainId(e){l(this,X,v(e))}get signature(){return f(this,Q)||null}set signature(e){l(this,Q,e==null?null:ie.from(e))}get accessList(){const e=f(this,Y)||null;return e??(this.type===1||this.type===2||this.type===3?[]:null)}set accessList(e){l(this,Y,e==null?null:Ie(e))}get maxFeePerBlobGas(){const e=f(this,T);return e==null&&this.type===3?y:e}set maxFeePerBlobGas(e){l(this,T,e==null?null:v(e,"maxFeePerBlobGas"))}get blobVersionedHashes(){let e=f(this,O);return e==null&&this.type===3?[]:e}set blobVersionedHashes(e){if(e!=null){c(Array.isArray(e),"blobVersionedHashes must be an Array","value",e),e=e.slice();for(let s=0;s<e.length;s++)c(ge(e[s],32),"invalid blobVersionedHash",`value[${s}]`,e[s])}l(this,O,e)}get blobs(){return f(this,R)==null?null:f(this,R).map(e=>Object.assign({},e))}set blobs(e){if(e==null){l(this,R,null);return}const s=[],n=[];for(let r=0;r<e.length;r++){const i=e[r];if(et(i)){I(f(this,_),"adding a raw blob requires a KZG library","UNSUPPORTED_OPERATION",{operation:"set blobs()"});let o=U(i);if(c(o.length<=Be,"blob is too large",`blobs[${r}]`,i),o.length!==Be){const A=new Uint8Array(Be);A.set(o),o=A}const g=f(this,_).blobToKzgCommitment(o),b=P(f(this,_).computeBlobKzgProof(o,g));s.push({data:P(o),commitment:P(g),proof:b}),n.push(Re(1,g))}else{const o=P(i.commitment);s.push({data:P(i.data),commitment:o,proof:P(i.proof)}),n.push(Re(1,o))}}l(this,R,s),l(this,O,n)}get kzg(){return f(this,_)}set kzg(e){l(this,_,e)}get hash(){return this.signature==null?null:ue(oe(this,ee,he).call(this,!0,!1))}get unsignedHash(){return ue(this.unsignedSerialized)}get from(){return this.signature==null?null:gt(this.unsignedHash,this.signature)}get fromPublicKey(){return this.signature==null?null:Ge.recoverPublicKey(this.unsignedHash,this.signature)}isSigned(){return this.signature!=null}get serialized(){return oe(this,ee,he).call(this,!0,!0)}get unsignedSerialized(){return oe(this,ee,he).call(this,!1,!1)}inferType(){const e=this.inferTypes();return e.indexOf(2)>=0?2:e.pop()}inferTypes(){const e=this.gasPrice!=null,s=this.maxFeePerGas!=null||this.maxPriorityFeePerGas!=null,n=this.accessList!=null,r=f(this,T)!=null||f(this,O);this.maxFeePerGas!=null&&this.maxPriorityFeePerGas!=null&&I(this.maxFeePerGas>=this.maxPriorityFeePerGas,"priorityFee cannot be more than maxFee","BAD_DATA",{value:this}),I(!s||this.type!==0&&this.type!==1,"transaction type cannot have maxFeePerGas or maxPriorityFeePerGas","BAD_DATA",{value:this}),I(this.type!==0||!n,"legacy transaction cannot have accessList","BAD_DATA",{value:this});const i=[];return this.type!=null?i.push(this.type):s?i.push(2):e?(i.push(1),n||i.push(0)):n?(i.push(1),i.push(2)):(r&&this.to||(i.push(0),i.push(1),i.push(2)),i.push(3)),i.sort(),i}isLegacy(){return this.type===0}isBerlin(){return this.type===1}isLondon(){return this.type===2}isCancun(){return this.type===3}clone(){return C.from(this)}toJSON(){const e=s=>s==null?null:s.toString();return{type:this.type,to:this.to,data:this.data,nonce:this.nonce,gasLimit:e(this.gasLimit),gasPrice:e(this.gasPrice),maxPriorityFeePerGas:e(this.maxPriorityFeePerGas),maxFeePerGas:e(this.maxFeePerGas),value:e(this.value),chainId:e(this.chainId),sig:this.signature?this.signature.toJSON():null,accessList:this.accessList}}static from(e){if(e==null)return new C;if(typeof e=="string"){const n=U(e);if(n[0]>=127)return C.from(At(n));switch(n[0]){case 1:return C.from(Gt(n));case 2:return C.from(Ft(n));case 3:return C.from(It(n))}I(!1,"unsupported transaction type","UNSUPPORTED_OPERATION",{operation:"from"})}const s=new C;return e.type!=null&&(s.type=e.type),e.to!=null&&(s.to=e.to),e.nonce!=null&&(s.nonce=e.nonce),e.gasLimit!=null&&(s.gasLimit=e.gasLimit),e.gasPrice!=null&&(s.gasPrice=e.gasPrice),e.maxPriorityFeePerGas!=null&&(s.maxPriorityFeePerGas=e.maxPriorityFeePerGas),e.maxFeePerGas!=null&&(s.maxFeePerGas=e.maxFeePerGas),e.maxFeePerBlobGas!=null&&(s.maxFeePerBlobGas=e.maxFeePerBlobGas),e.data!=null&&(s.data=e.data),e.value!=null&&(s.value=e.value),e.chainId!=null&&(s.chainId=e.chainId),e.signature!=null&&(s.signature=ie.from(e.signature)),e.accessList!=null&&(s.accessList=e.accessList),e.blobVersionedHashes!=null&&(s.blobVersionedHashes=e.blobVersionedHashes),e.kzg!=null&&(s.kzg=e.kzg),e.blobs!=null&&(s.blobs=e.blobs),e.hash!=null&&(c(s.isSigned(),"unsigned transaction cannot define '.hash'","tx",e),c(s.hash===e.hash,"hash mismatch","tx",e)),e.from!=null&&(c(s.isSigned(),"unsigned transaction cannot define '.from'","tx",e),c(s.from.toLowerCase()===(e.from||"").toLowerCase(),"from mismatch","tx",e)),s}};S=new WeakMap,K=new WeakMap,$=new WeakMap,j=new WeakMap,M=new WeakMap,W=new WeakMap,J=new WeakMap,Z=new WeakMap,q=new WeakMap,X=new WeakMap,Q=new WeakMap,Y=new WeakMap,T=new WeakMap,O=new WeakMap,_=new WeakMap,R=new WeakMap,ee=new WeakSet,he=function(e,s){I(!e||this.signature!=null,"cannot serialize unsigned transaction; maybe you meant .unsignedSerialized","UNSUPPORTED_OPERATION",{operation:".serialized"});const n=e?this.signature:null;switch(this.inferType()){case 0:return Lt(this,n);case 1:return Ht(this,n);case 2:return Bt(this,n);case 3:return vt(this,n,s?this.blobs:null)}I(!1,"unsupported transaction type","UNSUPPORTED_OPERATION",{operation:".serialized"})};let Te=C;export{Ct as MessagePrefix,ie as Signature,Ge as SigningKey,Te as Transaction,Ze as ZeroAddress,_t as ZeroHash,Ie as accessListify,I as assert,c as assertArgument,Ut as assertPrivate,dt as computeAddress,fe as concat,zt as dataLength,be as decodeRlp,Nt as defineProperties,te as encodeRlp,me as getAddress,v as getBigInt,U as getBytes,Vt as getBytesCopy,Ke as getNumber,Dt as getUint,Ot as hashMessage,P as hexlify,et as isBytesLike,ge as isHexString,ue as keccak256,Rt as makeError,gt as recoverAddress,se as sha256,L as toBeArray,Tt as toBeHex,Kt as toUtf8Bytes,$t as version,de as zeroPadValue};
//# sourceMappingURL=index-BapWEl97.js.map
